<div class="card p-4 mb-2" style="max-width: 600px; margin: 5px auto 0 auto;">
  <h3 class="mb-3 text-center">
    {{ tournament?.tournamentName || 'Fikstür Ekranı' }}
  </h3>
  <div *ngIf="tournament" class="d-flex flex-wrap justify-content-center gap-2 mb-2">
    <span class="badge bg-success">
      {{ tournament.participants?.length }} Katılımcı
    </span>
    <span class="badge bg-info text-dark">
      {{ tournament.tournamentType === 'grup' ? 'Grup' : 'Eleme' }} Tipi
    </span>
    <span class="badge bg-warning text-dark">
      {{ tournament.matchType === 'tek' ? 'Tek Maç' : 'Çift Maç' }}
    </span>
    <span class="badge bg-secondary text-dark">
      {{ tournament.averageType === 'genel' ? 'Genel Averaj' : 'İkili Averaj' }}
    </span>
    <span class="badge bg-light text-dark border">
      {{ tournament.createdAt | date:'dd.MM.yyyy HH:mm' }}
    </span>
  </div>
  <!-- <p class="text-center text-muted">Burada turnuva fikstürü ve maçlar listelenecek.</p> -->
</div>
<div *ngIf="tournament && tournament.tournamentType === 'grup'">
  <div *ngFor="let groupName of (groups | keyvalue)">
    <div class="d-flex justify-content-center mb-4 w-100" style="max-width: 1200px; margin-left: auto; margin-right: auto;">
      <div class="card p-1 d-flex flex-row justify-content-center align-items-start w-100" style="max-width: 1100px;">
        <div style="width: 60%; min-width: 220px; overflow-x: auto;">
         <h5 class="mb-3">{{ groupName.key }} - Puan Tablosu</h5>
        <app-group-table
          [groupName]="groupName.key"
          [participants]="groupName.value"
          [matches]="groupFixtures[groupName.key]"
          (save)="onGroupSave(groupName.key)">
        </app-group-table>
        </div>
        <div style="width: 40%; min-width: 220px; overflow-y: auto; max-height: 400px;">
          <h5 class="mb-3">{{ groupName.key }} Fikstür</h5>
          <ng-container *ngIf="groupedFixtures[groupName.key]">
            <div *ngFor="let round of (groupedFixtures[groupName.key] | keyvalue : sortByRound)">
              <div class="mb-3">
                <div class="fw-bold text-primary mb-2 text-center">{{ round.key }}. Hafta</div>
                <div 
                  *ngFor="let match of round.value" 
                  class="row align-items-center mb-2 justify-content-center gx-1 flex-nowrap"
                  style="min-width: 320px;"
                >
                  <div class="col-5 text-end px-0" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 110px;margin-right: 15px;">
                    <span class="d-inline-block w-100" style="overflow: hidden; text-overflow: ellipsis;">  {{ getParticipantName(match.homeTeamId) }}  </span>
                  </div>
                  <div class="col-1 px-0 d-flex justify-content-end" style="max-width: 48px;">
                    <input
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      class="form-control text-center"
                      style="width: 40px; min-width: 40px;"
                      [(ngModel)]="match.homeScore"
                      [name]="'homeScore_' + match.id"
                      maxlength="2"
                      [value]="match.homeScore === null ? '' : match.homeScore"
                    >
                  </div>
                  <div class="col-1 px-0 text-center" style="width: 18px; min-width: 18px;">-</div>
                  <div class="col-1 px-0 d-flex justify-content-start" style="max-width: 48px;">
                    <input
                      type="text"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      class="form-control text-center"
                      style="width: 40px; min-width: 40px;"
                      [(ngModel)]="match.awayScore"
                      [name]="'awayScore_' + match.id"
                      maxlength="2"
                      [value]="match.awayScore === null ? '' : match.awayScore"
                    >
                  </div>
                  <div class="col-5 text-start px-0" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 110px;margin-left: 15px;">
                    <span class="d-inline-block w-100" style="overflow: hidden; text-overflow: ellipsis;"> {{ getParticipantName(match.awayTeamId) }}</span>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
